<template page>
  <l-m src="/packages/pui/list/list.html"></l-m>
  <l-m src="/packages/pui/button/button.html"></l-m>
  <l-m src="/packages/pui/switch/switch.html"></l-m>
  <style>
    :host {
      display: flex !important;
      flex-direction: column;
      height: 100%;
      width: 100%;
    }

    .header {
      display: flex;
      height: 50px;
      background-color: var(--md-sys-color-on-normal);
    }

    .logo {
      font-size: 20px;
      font-weight: bold;
    }

    .main {
      position: relative;
      flex: 1;
      display: flex;
      width: 100%;
      max-width: 1200px;
      margin: 0 auto;
    }

    .left {
      width: 260px;
      /* background-color: rgba(10, 10, 128, 0.443); */
    }

    .left p-list-item {
      margin: 4px 0;
    }

    .left p-list-item[active-item]::part(main) {
      background-color: var(--md-sys-color-primary);
      color: var(--md-sys-color-on-primary);
    }

    .left p-list-item::part(main) {
      height: 36px;
      box-sizing: border-box;
      border-radius: 22px;
    }
    .article {
      background-color: rgba(172, 54, 54, 0.371);
      flex: 1;
    }

    .left p-list-item[collapse-childs] [toggle-collapse] {
      transform: rotate(90deg);
      transition: all ease 0.2s;
    }

    .left p-list-item[collapse-childs="open"] [toggle-collapse] {
      transform: rotate(0deg);
    }
  </style>
  <div class="header">
    <div class="main" style="align-items: center">
      <div class="logo">主体文档</div>
      <p-switch
        checked-value="dark"
        unchecked-value="light"
        sync:value="theme"
        style="margin: 0 16px 0 auto; font-size: 22px; line-height: 22px"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="1em"
          height="1em"
          viewBox="0 0 512 512"
        >
          <path
            fill="currentColor"
            fill-rule="evenodd"
            d="M277.333 405.333v85.333h-42.667v-85.333zm99.346-58.824l60.34 60.34l-30.17 30.17l-60.34-60.34zm-241.359 0l30.17 30.17l-60.34 60.34l-30.17-30.17zM256 139.353c64.422 0 116.647 52.224 116.647 116.647c0 64.422-52.225 116.647-116.647 116.647A116.427 116.427 0 0 1 139.352 256c0-64.423 52.225-116.647 116.648-116.647m0 42.666c-40.859 0-73.981 33.123-73.981 74.062a73.76 73.76 0 0 0 21.603 52.296c13.867 13.867 32.685 21.64 52.378 21.603zm234.666 52.647v42.667h-85.333v-42.667zm-384 0v42.667H21.333v-42.667zM105.15 74.98l60.34 60.34l-30.17 30.17l-60.34-60.34zm301.7 0l30.169 30.17l-60.34 60.34l-30.17-30.17zM277.332 21.333v85.333h-42.667V21.333z"
          />
        </svg>
      </p-switch>
    </div>
  </div>
  <div class="main">
    <div class="left">
      <p-list>
        <p-list-item button>我是标题1</p-list-item>
        <p-list-item button active-item>我是标题2</p-list-item>
        <p-list-item button collapse-childs="open">
          我是标题3
          <p-button
            toggle-collapse
            size="mini"
            slot="suffix"
            variant="text"
            style="position: relative; display: block; z-index: 3"
          >
            <span style="font-size: 16px">▾</span>
          </p-button>

          <p-list slot="childs" style="--ladder-left: 8px">
            <p-list-item button>我是标题3-1</p-list-item>
            <p-list-item button>我是标题3-2</p-list-item>
            <p-list-item button>我是标题3-3</p-list-item>
          </p-list>
        </p-list-item>
        <p-list-item button>我是标题4</p-list-item>
      </p-list>
    </div>
    <div class="article"></div>
  </div>
  <script>
    export default async ({ load }) => {
      await load("/packages/pui/public/init.js");

      return {
        data: {
          theme: sessionStorage.getItem("theme"),
        },
        watch: {
          theme(theme) {
            if (!theme) {
              return;
            }

            if (!this.getProvider("pui")) {
              return;
            }

            sessionStorage.setItem("theme", theme);
            this.getProvider("pui").theme = theme;
          },
        },
        proto: {},
        attached() {},
      };
    };
  </script>
</template>
