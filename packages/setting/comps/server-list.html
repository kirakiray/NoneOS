<template component>
  <l-m src="./user-block.html"></l-m>
  <style>
    :host {
      display: block;
    }
    .server-line {
      padding: 4px 8px;
      margin: 0 16px 0 0;
      border: #aaa solid 1px;
      border-radius: 8px;
    }
  </style>

  <div>
    <x-fill :value="servers">
      <div class="server-line">
        <div style="display: flex; align-items: center">
          Name: {{$data.serverName}}
          <div style="margin-left: 16px; font-size: 12px">
            version: {{$data.serverVersion}}
          </div>
          <div style="margin-left: auto; font-size: 12px">
            能否被其他用户可见:
            <select disabled>
              <option value="1">可见</option>
              <option value="0">不可见</option>
            </select>
          </div>
        </div>
        <div>Status: {{$data.status}}</div>
        <div style="color: #aaa">ServerUrl: {{$data.serverUrl}}</div>
        <x-if
          :value="$data.status === 'disconnected' || $data.status === 'closed'"
        >
          <button on:click="$data._server.connect()">重新连接服务器</button>
        </x-if>
        <x-if :value="$data.status === 'connected'">
          <div>
            <x-fill
              name="user-block"
              :value="$data.users"
              fill-key="userID"
            ></x-fill>
          </div>
        </x-if>
      </div>
    </x-fill>
  </div>

  <template name="user-block">
    <setting-user-block
      :user-name="$data.userName"
      :userid="$data.userID"
      :_client-user="$data._user"
    ></setting-user-block>
  </template>
  <script>
    export default {
      tag: "setting-server-list",
      data: {
        servers: [],
      },
    };
  </script>
</template>
