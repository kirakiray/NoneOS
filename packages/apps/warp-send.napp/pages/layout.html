<template page>
  <l-m src="/packages/pui/navigation/nav-layout.html"></l-m>
  <l-m src="/packages/pui/navigation/nav-bar.html"></l-m>
  <l-m src="/packages/comps/local-icon/local-icon.html"></l-m>
  <style>
    :host {
      display: block;
    }
  </style>

  <p-nav-layout
    attr:open-drawer="openDrawer ? '' : null"
    on:click-drawer-mask="openDrawer = false"
  >
    <slot></slot>
    <p-nav-bar slot="nav">
      <p-nav-item
        attr:active-item="activeId === 'received'"
        on:click="activeId = 'received'"
      >
        接收
        <n-local-icon name="download" slot="icon"></n-local-icon>
      </p-nav-item>
      <p-nav-item
        attr:active-item="activeId === 'sent'"
        on:click="activeId = 'sent'"
      >
        <n-local-icon name="send" slot="icon"></n-local-icon>
        发送
      </p-nav-item>
      <p-nav-item
        attr:active-item="activeId === 'settings'"
        on:click="activeId = 'settings'"
      >
        <n-local-icon name="setting" slot="icon"></n-local-icon>
        设置
      </p-nav-item>
    </p-nav-bar>
  </p-nav-layout>

  <script>
    export default async () => {
      return {
        data: {
          openDrawer: false,
          activeId: "",
        },
        ready() {
          this.on("warp-send:set-active-id", (e) => {
            this.activeId = e.data.activeId;
          });
        },
      };
    };
  </script>
</template>
