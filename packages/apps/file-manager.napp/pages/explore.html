<template page>
  <l-m src="../comps/file-explore.html"></l-m>
  <style>
    :host {
      display: block;
      height: 100%;
    }
  </style>
  <n-file-explore :path="path" :search="search"></n-file-explore>
  <script>
    export const parent = "../tool-layout.html";

    export default async ({ load, query }) => {
      return {
        data: {
          path: query.path || "local",
          userId: query.userid || undefined,
          search: "",
        },
        proto: {
          refreshFiles() {
            this.shadow.$("n-file-explore").refreshFiles();
          },
        },
        ready() {},
        attached() {
          this.emit("go-page", {
            data: {
              path: this.path,
              userId: this.userId,
            },
          });
        },
        detached() {},
      };
    };
  </script>
</template>
