<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>case</title>
    <script src="/packages/libs/ofa/ofa.js"></script>
  </head>
  <body>
    <div id="log"></div>
    <script type="module">
      import { createGet } from "/packages/fs/remote/main.js";
      import { getUserStore, on, getServers } from "/packages/user/main.js";

      const user1 = await getUserStore("user1");
      await getServers("user1");

      await new Promise((res) => setTimeout(res, 100));

      // 访问第一个用户的内容
      const get = createGet(user1.userId);

      const localHandle = await get("local");

      const length = await localHandle.length();

      debugger;

      // import {
      //   connect,
      //   getConnectionStore,
      // } from "/packages/user/connection/main.js";
      // import { getUserStore, on, getServers } from "/packages/user/main.js";

      // const user1 = await getUserStore("user1");
      // const user2 = await getUserStore("user2");

      // // 等待连接握手服务器
      // await getServers("user1");
      // await getServers("user2");

      // const u1Connections = await getConnectionStore("user1");
      // window.u1Connections = u1Connections;
      // const u2Connections = await getConnectionStore("user2");
      // window.u2Connections = u2Connections;

      // await new Promise((res) => setTimeout(res, 100));
    </script>
  </body>
</html>
