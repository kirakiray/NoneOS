<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>case</title>
    <script src="/packages/libs/ofa/ofa.js"></script>
  </head>
  <body>
    <script type="module">
      import { getServers, getUserStore } from "/packages/user/main.js";

      const user1Servers = await getServers("user1");
      const user2Servers = await getServers("user2");
      const user2 = await getUserStore("user2");

      await new Promise((resolve) => setTimeout(resolve, 200)); // 等待以确保服务器连接稳定

      const inviteCode = Math.random().toString(36).slice(2, 6); // 生成6位随机字符串作为邀请码

      // 用户1设置邀请码
      const inviteResult = await user1Servers[0].post({
        type: "invite-code",
        setInviteCode: inviteCode,
      });

      console.log("inviteResult: ", inviteResult);

      // 查找用户2
      const findResult = await user2Servers[0].post({
        type: "invite-code",
        findInviteCode: inviteCode,
      });

      console.log("findResult: ", findResult);
    </script>
  </body>
</html>
